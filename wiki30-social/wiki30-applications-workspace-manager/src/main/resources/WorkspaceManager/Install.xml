<?xml version="1.0" encoding="UTF-8"?>
<xwikidoc>
<web>WorkspaceManager</web>
<name>Install</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent>WorkspaceManager.WebHome</parent>
<creator>XWiki.Admin</creator>
<author>XWiki.Admin</author>
<customClass></customClass>
<contentAuthor>XWiki.Admin</contentAuthor>
<creationDate>1187017247000</creationDate>
<date>1303407212000</date>
<contentUpdateDate>1303407212000</contentUpdateDate>
<version>1.1</version>
<title></title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<comment></comment>
<minorEdit>true</minorEdit>
<syntaxId>xwiki/2.0</syntaxId>
<hidden>false</hidden>
<content>{{velocity}}
#set($WikiManager = $xwiki.wikimanager)
#if(!$WikiManager)
  {{error}}$msg.get("wikimanager.pluginnotenabled"){{/error}}
#end
#if(!$xwiki.applicationmanager)
  {{error}}$msg.get("xapp.pluginnotenabled"){{/error}}
#end
##
#set($Exception = $WikiManager.DefaultException)
#set($templateList = $WikiManager.getWikiTemplateList())
#if($templateList.size() == 0)
  #set($result = $WikiManager.createWikiTemplate("workspacetemplate", "Workspace Template", "workspace-template.xar"))
  #if ($result == $Exception.ERROR_NOERROR)
    {{info}}$msg.get("workspacemanager.template.install.success"){{/info}}
  #elseif ($result == $Exception.ERROR_XWIKI_ACCESS_DENIED)
    {{error}}$msg.get("workspacemanager.template.install.notallowed"){{/error}}
  #else
    {{error}}$msg.get("workspacemanager.template.install.error", [$context.lastexception]){{/error}}
  #end
#else
  ##
  ##Don't display this information if the code is included from somewhere else.
  ##
  #if($context.doc == $context.tdoc)
    {{info}}$msg.get("workspacemanager.template.install.success"){{/info}}
  #end
#end
{{/velocity}}</content></xwikidoc>
